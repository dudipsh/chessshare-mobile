# Chess Mastery - מסמך דרישות מוצר (PRD)

## 1. תקציר מנהלים

**Chess Mastery** היא אפליקציה נייטיבית פרימיום למובייל עבור iOS ו-Android, בנויה עם Flutter. האפליקציה מתמקדת בעזרה לשחקני שחמט להשתפר דרך ניתוח משחקים ואימון מובנה, ומספקת חוויה נייטיבית עדיפה על פתרונות מבוססי ווב.

### הצהרת חזון
*"הפכו כל משחק להזדמנות למידה עם ניתוח אינטליגנטי ואימון מותאם אישית."*

### קהל יעד
- **עיקרי:** שחקני שחמט ברמת ביניים (דירוג 1000-1800) שמשחקים אקטיבית אונליין
- **משני:** שחקנים מתקדמים המחפשים כלי ניתוח עמוקים
- **שלישוני:** שחקנים מזדמנים המעוניינים להשתפר

---

## 2. יעדי מוצר ומדדי הצלחה

### יעדים עסקיים
| יעד | מדד | יעד (6 חודשים) |
|-----|------|-----------------|
| רכישת משתמשים | משתמשים פעילים חודשיים | 50,000 |
| הכנסות | הכנסה חוזרת חודשית | $15,000 |
| מעורבות | משתמשים פעילים יומיים | 15,000 |
| שימור | שימור 30 יום | 40% |
| המרה | חינם לתשלום | 5% |

### יעדי משתמשים
| סוג משתמש | יעד | איך אנחנו עוזרים |
|-----------|------|-------------------|
| שחקן מזדמן | להבין טעויות | ניתוח משחק מהיר עם הסברים |
| שחקן מתפתח | שיפור שיטתי | תרגול טעויות, מעקב התקדמות |
| שחקן רציני | הכנה עמוקה | לוחות לימוד, אימון פתיחות |

---

## 3. רמות מנוי

### חינם
| פיצ'ר | מגבלה |
|-------|--------|
| ניתוח משחקים | 2 ליום |
| עומק Stockfish | 15 |
| משחקים אופליין | 10 שמורים |
| לוחות אופליין | 5 שמורים |
| תובנות | בסיסיות בלבד |
| פרסומות | מוצגות |

### בסיסי - $5.99/חודש
| פיצ'ר | מגבלה |
|-------|--------|
| ניתוח משחקים | ללא הגבלה |
| עומק Stockfish | 22 |
| משחקים אופליין | 100 שמורים |
| לוחות אופליין | 50 שמורים |
| תובנות | גישה מלאה |
| פרסומות | ללא |
| סנכרון ענן | מופעל |
| תרגול טעויות | גישה מלאה |

### פרו - $11.99/חודש (עתידי)
| פיצ'ר | מגבלה |
|-------|--------|
| הכל בבסיסי | + |
| עומק Stockfish | 30 |
| אחסון אופליין | ללא הגבלה |
| ניתוח מרובה קווים | 3 מהלכים טובים ביותר |
| מאגר פתיחות | גישה מלאה |
| יצוא | PDF, PGN |
| תמיכת עדיפות | תגובה תוך 24ש' |

---

## 4. פיצ'רים מרכזיים

### 4.1 מרכז ייבוא משחקים

**תיאור:** מקום מרכזי לייבוא משחקים מ-Chess.com, Lichess, או קבצי PGN.

**סיפורי משתמש:**
- כמשתמש, אני רוצה לחבר את חשבון ה-Chess.com שלי כדי שמשחקים יתיובאו אוטומטית
- כמשתמש, אני רוצה לייבא את משחקי ה-Lichess שלי לפי שם משתמש
- כמשתמש, אני רוצה להדביק/להעלות קובץ PGN לניתוח
- כמשתמש, אני רוצה לראות התקדמות ייבוא וסטטוס הצלחה/כישלון

**קריטריוני קבלה:**
- [ ] קלט שם משתמש Chess.com עם ולידציה
- [ ] קלט שם משתמש Lichess עם ולידציה
- [ ] בורר קבצי PGN (מקבצי המכשיר)
- [ ] אזור הדבקת טקסט PGN
- [ ] אינדיקטור התקדמות ייבוא
- [ ] התראות הצלחה/שגיאה
- [ ] משחקים נוספים למסד הנתונים המקומי

**דרישות UI/UX:**
- פריסה נקייה מבוססת כרטיסים למקורות ייבוא
- אנימציית התקדמות בזמן ייבוא
- הודעות שגיאה ברורות עם אפשרות ניסיון חוזר
- לוגואים של פלטפורמות (Chess.com, Lichess) מוצגים בולט

---

### 4.2 דפדפן משחקים

**תיאור:** דפדוף, סינון וחיפוש במשחקים מיובאים.

**סיפורי משתמש:**
- כמשתמש, אני רוצה לראות את כל המשחקים המיובאים שלי ברשימה
- כמשתמש, אני רוצה לסנן משחקים לפי תוצאה (ניצחון/הפסד/תיקו)
- כמשתמש, אני רוצה לסנן משחקים לפי קצב משחק (בולט/בליץ/ראפיד)
- כמשתמש, אני רוצה לסנן משחקים לפי טווח תאריכים
- כמשתמש, אני רוצה לחפש משחקים לפי שם יריב
- כמשתמש, אני רוצה לראות סטטיסטיקות משחק במבט מהיר

**קריטריוני קבלה:**
- [ ] רשימת משחקים עם גלילה אינסופית
- [ ] סינון לפי: תוצאה, קצב משחק, תאריך, צבע ששיחקתי, פלטפורמה
- [ ] מיון לפי: תאריך, דיוק, דירוג
- [ ] חיפוש לפי שם משתמש יריב
- [ ] כרטיס משחק מציג: יריב, תוצאה, דיוק, פתיחה, תאריך
- [ ] משיכה לרענון
- [ ] גישה אופליין למשחקים שמורים

**דרישות UI/UX:**
- רשימת משחקים מבוססת כרטיסים עם מידע מרכזי נראה
- קידוד צבעים לניצחון (ירוק), הפסד (אדום), תיקו (אפור)
- דיוק מוצג כאחוז עם אינדיקטור צבע
- אנימציות סינון חלקות
- גיליון תחתון לפילטרים
- תחושה פרימיום עם צללים עדינים ופינות מעוגלות

---

### 4.3 ניתוח משחק

**תיאור:** ניתוח עמוק של משחקים בודדים עם הערכת Stockfish.

**סיפורי משתמש:**
- כמשתמש, אני רוצה לראות ניתוח מהלך-אחר-מהלך של המשחק שלי
- כמשתמש, אני רוצה להבין למה מהלך היה טוב או רע
- כמשתמש, אני רוצה לראות מה היה המהלך הטוב ביותר
- כמשתמש, אני רוצה לראות את אחוז הדיוק שלי
- כמשתמש, אני רוצה לשחזר את המשחק עם שכבות ניתוח
- כמשתמש, אני רוצה לשמור עמדות מעניינות

**קריטריוני קבלה:**
- [ ] לוח שחמט אינטראקטיבי עם ניווט מהלכים
- [ ] רשימת מהלכים עם סמני איכות (מבריק, מצוין, הטוב ביותר, טוב, אי-דיוק, טעות, שגיאה חמורה)
- [ ] סרגל הערכה המציג יתרון
- [ ] הצעות למהלך הטוב ביותר עם חיצים על הלוח
- [ ] חישוב דיוק לשני השחקנים
- [ ] זיהוי פתיחה
- [ ] פונקציונליות שמירת עמדה
- [ ] שיתוף ניתוח כתמונה או קישור

**קטגוריות איכות מהלכים:**
| קטגוריה | סמל | צבע | אובדן סנטיפון |
|----------|------|------|----------------|
| מבריק | !! | ציאן | < 0 (טוב מהמנוע) |
| מצוין | ! | טורקיז | 0-10 |
| הטוב ביותר | ✓ | ירוק | 0 |
| טוב | ◯ | ירוק בהיר | 10-30 |
| אי-דיוק | ?! | צהוב | 30-100 |
| טעות | ? | כתום | 100-200 |
| שגיאה חמורה | ?? | אדום | > 200 |

**דרישות UI/UX:**
- לוח במסך מלא עם UI מינימלי בזמן ניתוח
- אנימציות כלים חלקות
- משוב הפטי על מהלכים
- צלילי מהלכים (ניתנים להגדרה)
- מחוות החלקה לניווט מהלכים
- הקשה כפולה להיפוך לוח
- סרגל הערכה פרימיום עם גרדיאנט

---

### 4.4 תרגול טעויות (פאזלים)

**תיאור:** תרגול עמדות מהמשחקים שלך בהן עשית טעויות.

**סיפורי משתמש:**
- כמשתמש, אני רוצה לתרגל עמדות בהן עשיתי טעויות
- כמשתמש, אני רוצה לראות את הטעויות שלי מאורגנות לפי חומרה
- כמשתמש, אני רוצה חזרה מרווחת לעמדות קשות
- כמשתמש, אני רוצה לעקוב אחר השיפור שלי בטעויות ספציפיות
- כמשתמש, אני רוצה לתרגל מהלכים מבריקים שהחמצתי

**קריטריוני קבלה:**
- [ ] תור פאזלים ממוין לפי אלגוריתם חזרה מרווחת
- [ ] סינון לפי סוג טעות (שגיאה חמורה, טעות, אי-דיוק)
- [ ] הצגת הקשר המשחק המקורי
- [ ] מעקב ניסיונות ואחוז הצלחה
- [ ] חגיגת פתרונות נכונים
- [ ] הסבר למה המהלך הטוב ביותר נכון
- [ ] פרסי XP על פתרון

**דרישות UI/UX:**
- הצגת פאזל נקייה
- אנימציית חגיגה בפתרון
- מונה סדרה
- התקדמות דרך פאזלים יומיים
- מערכת רמזים (משתמשת בניסיון)

---

### 4.5 לוחות לימוד

**תיאור:** לימוד עמדות שחמט ווריאציות שנוצרו על ידי הקהילה.

**סיפורי משתמש:**
- כמשתמש, אני רוצה לדפדף בלוחות לימוד ציבוריים
- כמשתמש, אני רוצה לתרגל וריאציות במצב לימוד
- כמשתמש, אני רוצה לעקוב אחר ההתקדמות שלי בכל לוח
- כמשתמש, אני רוצה לשמור לוחות לגישה אופליין
- כמשתמש, אני רוצה לראות סטטיסטיקות ההתקדמות שלי

**קריטריוני קבלה:**
- [ ] דפדוף בלוחות ציבוריים עם חיפוש
- [ ] קטגוריות לוחות (פתיחות, סיומים, טקטיקות)
- [ ] מצב תרגול עם אימות מהלכים
- [ ] מעקב התקדמות לכל וריאציה
- [ ] הורדה לאופליין
- [ ] סימניות/מועדפים
- [ ] דירוג/לייקים על לוחות

**דרישות UI/UX:**
- רשת כרטיסים לדפדוף לוחות
- טבעת התקדמות על כל כרטיס
- זרימת תרגול חלקה
- משוב מעודד על מהלכים נכונים
- בורר וריאציות נקי

---

### 4.6 דשבורד תובנות

**תיאור:** אנליטיקות ודפוסים ממשחקים מנותחים.

**סיפורי משתמש:**
- כמשתמש, אני רוצה לראות את מגמת הדירוג שלי לאורך זמן
- כמשתמש, אני רוצה לראות את מגמות הדיוק שלי
- כמשתמש, אני רוצה לדעת את הפתיחות החזקות/החלשות ביותר שלי
- כמשתמש, אני רוצה לראות דפוסים בטעויות שלי
- כמשתמש, אני רוצה להבין את ניהול הזמן שלי

**קריטריוני קבלה:**
- [ ] גרף דירוג עם קו מגמה
- [ ] גרף דיוק לפי שלב משחק
- [ ] אחוזי ניצחון בפתיחות
- [ ] טעויות נפוצות ביותר
- [ ] ניתוח שימוש בזמן (אם זמין)
- [ ] השוואה לתקופות קודמות
- [ ] הצעות לשיפור

**דרישות UI/UX:**
- גרפים יפים עם אנימציות
- ויזואליזציית נתונים מקודדת צבע
- תקופות זמן ניתנות להחלקה
- סטטיסטיקות מפתח מוצגות בולט
- תובנות ניתנות לפעולה עם קישורים לתרגול

---

## 5. מערכת עיצוב

### 5.1 פלטת צבעים

**צבעים ראשיים:**
```
ראשי: #1A1A2E (נייבי כהה)
ראשי בהיר: #16213E
ראשי כהה: #0F0F1A
הדגשה: #4ECDC4 (טורקיז)
הדגשה בהירה: #7EDDD7
```

**צבעי סטטוס:**
```
הצלחה/ניצחון: #10B981 (אמרלד)
אזהרה: #F59E0B (ענבר)
שגיאה/הפסד: #EF4444 (אדום)
תיקו: #6B7280 (אפור)
```

**צבעי איכות מהלכים:**
```
מבריק: #00D4FF (ציאן)
מצוין: #14B8A6 (טורקיז)
הטוב ביותר: #22C55E (ירוק)
טוב: #84CC16 (ליים)
אי-דיוק: #EAB308 (צהוב)
טעות: #F97316 (כתום)
שגיאה חמורה: #EF4444 (אדום)
ספר: #8B5CF6 (סגול)
```

**צבעי לוח:**
```
משבצת בהירה: #EBECD0
משבצת כהה: #779556
הדגשה: rgba(255, 255, 0, 0.4)
מהלך אחרון: rgba(155, 199, 0, 0.4)
שח: rgba(255, 0, 0, 0.4)
```

### 5.2 טיפוגרפיה

**משפחת פונט:** Inter

| סגנון | גודל | משקל | שימוש |
|-------|------|-------|-------|
| כותרת 1 | 28px | Bold | כותרות מסכים |
| כותרת 2 | 22px | SemiBold | כותרות חלקים |
| כותרת 3 | 18px | SemiBold | כותרות כרטיסים |
| גוף | 16px | Regular | תוכן ראשי |
| גוף קטן | 14px | Regular | טקסט משני |
| כיתוב | 12px | Regular | תוויות, רמזים |
| מונו | 14px | Medium | נוטציה שחמטית |

---

## 6. זרימות משתמש

### 6.1 זרימת משתמש חדש

```
┌──────────────┐
│    מסך      │
│   פתיחה     │
└──────┬───────┘
       ▼
┌──────────────┐
│  קרוסלת     │ ◄── 3 מסכים המסבירים ערך
│  הצגה      │
└──────┬───────┘
       ▼
┌──────────────┐
│   הרשמה     │ ◄── Google / Apple / Email
│             │
└──────┬───────┘
       ▼
┌──────────────┐
│  חיבור      │ ◄── שם משתמש Chess.com / Lichess
│  חשבונות    │
└──────┬───────┘
       ▼
┌──────────────┐
│   ייבוא     │ ◄── ייבוא משחקים אחרונים
│   משחקים   │
└──────┬───────┘
       ▼
┌──────────────┐
│    מסך      │
│    בית     │
└──────────────┘
```

### 6.2 זרימת ניתוח משחק

```
┌──────────────┐
│   רשימת     │
│   משחקים   │
└──────┬───────┘
       │ הקשה על משחק
       ▼
┌──────────────┐     ┌──────────────┐
│   פרטי      │────▶│   טעינת     │ ◄── אם לא נותח
│   משחק     │     │   ניתוח     │
└──────┬───────┘     └──────┬───────┘
       │                     │
       │ כבר נותח            │ הושלם
       │                     ▼
       │             ┌──────────────┐
       └────────────▶│   תצוגת     │
                     │   ניתוח     │
                     └──────┬───────┘
                            │ הקשה על טעות
                            ▼
                     ┌──────────────┐
                     │   הוספה     │
                     │  לתרגול     │
                     └──────────────┘
```

---

## 7. מפרט אנימציות

### 7.1 תנועות כלי שחמט

| פעולה | אנימציה | משך | עקומה |
|-------|---------|------|--------|
| הזזת כלי | תרגום + קשת קלה | 200ms | easeOutCubic |
| אכילה | הקטנת הנאכל + תנועה | 250ms | easeOutBack |
| הצרחה | שני הכלים נעים בו-זמנית | 300ms | easeInOutCubic |
| הכתרה | הגדלה + אפקט זוהר | 400ms | easeOutElastic |
| מהלך לא חוקי | ניעור + חזרה | 300ms | easeOutBounce |

### 7.2 אנימציות UI

| אלמנט | אנימציה | משך | טריגר |
|-------|---------|------|--------|
| מעבר מסך | דהייה + החלקה | 300ms | ניווט |
| הופעת כרטיס | דהייה למעלה + הגדלה | 250ms | טעינה |
| לחיצת כפתור | הקטנה ל-95% | 100ms | הקשה |
| משוב הצלחה | פיצוץ קונפטי | 1000ms | הישג |
| סרגל הערכה | מילוי חלק | 500ms | עדכון ניתוח |
| טבעת התקדמות | סחיפה מעגלית | 800ms | עדכון התקדמות |

### 7.3 אפקטים פרימיום

| אפקט | תיאור | שימוש |
|------|-------|-------|
| זוהר | זוהר חיצוני רך במיקוד | אלמנטים פעילים |
| נצנוץ | אפקט שלד טעינה | מצבי טעינה |
| פעימה | אנימציית הגדלה עדינה | נדרשת תשומת לב |
| אדווה | אדווה חומרית בהקשה | כל האלמנטים הניתנים להקשה |
| פרלקס | אפקט עומק בגלילה | כותרות, כרטיסים |

---

## 8. מצב אופליין

### 8.1 תוכן שמור
- 10-100 משחקים אחרונים (בהתאם למנוי)
- 5-50 לוחות לימוד אחרונים (בהתאם למנוי)
- פאזלים אישיים של המשתמש
- תוצאות ניתוח למשחקים שמורים

### 8.2 יכולות אופליין
- צפייה במשחקים שמורים עם ניתוח מלא
- תרגול לוחות לימוד שמורים
- פתרון פאזלים אישיים
- הקלטת ניתוח חדש (סנכרון כשאונליין)

### 8.3 התנהגות סנכרון
- סנכרון אוטומטי כשחיבור חוזר
- פתרון קונפליקטים (שרת מנצח לנתונים משותפים)
- תור לשינויים אופליין לסנכרון
- אינדיקטור ויזואלי למצב אופליין

---

## 9. נגישות

### 9.1 דרישות
- תמיכת VoiceOver/TalkBack
- גודל טקסט דינמי
- עמידה בניגודיות צבעים (WCAG AA)
- מטרות מגע מינימום 44x44pt
- תמיכה בהפחתת תנועה

### 9.2 נגישות ספציפית לשחמט
- הכרזת מהלכים בנוטציה אלגברית
- תיאור מצב הלוח לפי בקשה
- משוב הפטי לאישור מהלכים
- אפשרות ערכת נושא לוח ניגודיות גבוהה

---

## 10. אירועי אנליטיקה

### 10.1 אירועים מרכזיים
| אירוע | מאפיינים | מטרה |
|-------|----------|------|
| app_open | session_id, platform | מעקב DAU |
| game_imported | platform, count | שימוש בפיצ'ר |
| game_analyzed | game_id, accuracy | פיצ'ר מרכזי |
| puzzle_solved | puzzle_id, time, attempts | מעורבות |
| board_practiced | board_id, progress | מעקב לימוד |
| subscription_viewed | plan_type | משפך המרה |
| subscription_started | plan_type, price | הכנסות |

### 10.2 משפכים
- אחוז השלמת הצגה ראשונית
- אחוז ניתוח משחק ראשון
- המרה מחינם לתשלום
- אחוז השלמת לימוד

---

## 11. אבני דרך להשקה

### MVP (שלב 1) - 8 שבועות
- [ ] אימות (Google, Apple)
- [ ] ייבוא משחקי Chess.com
- [ ] ניתוח משחק בסיסי
- [ ] רשימת משחקים עם פילטרים
- [ ] מגבלות רמה חינמית

### פיצ'רים מרכזיים (שלב 2) - 6 שבועות
- [ ] ייבוא Lichess
- [ ] ניתוח Stockfish מלא
- [ ] מצב תרגול טעויות
- [ ] תשלומי מנויים
- [ ] מצב אופליין

### מצב לימוד (שלב 3) - 6 שבועות
- [ ] דפדוף לוחות לימוד
- [ ] מצב תרגול
- [ ] מעקב התקדמות
- [ ] אינטגרציית ספריות

### ליטוש ותובנות (שלב 4) - 4 שבועות
- [ ] דשבורד תובנות
- [ ] אנימציות מתקדמות
- [ ] אופטימיזציית ביצועים
- [ ] אינטגרציית אנליטיקה

### השקה (שלב 5) - 2 שבועות
- [ ] בדיקות בטא
- [ ] אופטימיזציית App Store
- [ ] חומרי שיווק
- [ ] השקה ב-iOS ו-Android

---

## 12. קריטריונים להצלחה

### השקת MVP
- האפליקציה רצה ללא קריסות
- פיצ'רים מרכזיים עובדים
- תשלומי מנויים עובדים
- זמן הפעלה קרה <3 שניות

### יעדי 3 חודשים
- 20,000 הורדות
- 1,000 מנויים משלמים
- דירוג App Store 4.5+
- אחוז קריסות <1%

### יעדי 6 חודשים
- 50,000 הורדות
- 2,500 מנויים משלמים
- מומלץ ב-App Store (קטגוריית שחמט)
- שימור 30 יום 40%

---

## 13. סיכונים ומיטיגציות

| סיכון | השפעה | סבירות | מיטיגציה |
|-------|--------|---------|----------|
| ביצועי Stockfish במכשירים חלשים | גבוהה | בינונית | עומק מותאם, ניתוח ברקע |
| מגבלות קצב API (Chess.com) | בינונית | גבוהה | קאשינג, ייבוא פרוגרסיבי |
| אחוז המרה נמוך | גבוהה | בינונית | רמה חינמית נדיבה, פיצ'רים פרימיום משכנעים |
| תחרות מאפליקציות רשמיות | גבוהה | גבוהה | התמקדות באיכות ניתוח ו-UX |
| קונפליקטי סנכרון אופליין | בינונית | נמוכה | פתרון קונפליקטים ברור, מדיניות שרת-מנצח |

---

## נספח א: ניתוח תחרותי

| פיצ'ר | Chess Mastery | אפליקציית Chess.com | אפליקציית Lichess |
|-------|--------------|---------------------|-------------------|
| חוויה נייטיבית | Flutter | Native | Native |
| ניתוח אופליין | כן | מוגבל | כן |
| התקדמות חוצת-פלטפורמות | כן | כן | כן |
| לוחות לימוד מותאמים | כן | פרימיום | כן |
| תרגול טעויות אישיות | כן | לא | לא |
| עומק ניתוח עמוק | 22-30 | 18 | 20 |
| מחיר פרימיום | $5.99/חודש | $6.99/חודש | חינם |
| חוויה ללא פרסומות | בתשלום | בתשלום | כן |

---

## נספח ב: דרישות טכניות

- **גרסת iOS מינימלית:** 14.0
- **גרסת Android מינימלית:** API 24 (Android 7.0)
- **גרסת Flutter:** 3.16+
- **Backend:** Supabase (משותף עם Chess Share ווב)
- **מנוע שחמט:** Stockfish 16 דרך FFI
- **אחסון מקומי:** SQLite
- **ניהול מצב:** Riverpod 2.x
